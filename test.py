import streamlit as st

# ===============================
# ì•± ê¸°ë³¸ ì„¤ì •
# ===============================
st.set_page_config(page_title="ğŸ¶ ê°•ì•„ì§€ í–‰ë™ ì„¤ëª… ì•±", page_icon="ğŸ¾", layout="wide")
st.title("ğŸ¶ ê°•ì•„ì§€ í–‰ë™ ì„¤ëª… ì•±")
st.write("ê°•ì•„ì§€ê°€ ì–´ë–¤ í–‰ë™ì„ í•˜ëŠ”ì§€ ì„ íƒí•˜ë©´ ì˜ë¯¸ì™€ ëŒ€ì²˜ë²•ì„ ì•Œë ¤ë“œë ¤ìš”! ê¸°ë¡ëœ í–‰ë™ì„ ë°”íƒ•ìœ¼ë¡œ ë§ì¶¤ í”¼ë“œë°±ë„ ì œê³µí•©ë‹ˆë‹¤ ğŸ“")

# ===============================
# ê°•ì•„ì§€ ê¸°ë³¸ ì •ë³´ ì…ë ¥
# ===============================
st.sidebar.header("ğŸ“‹ ê°•ì•„ì§€ ì •ë³´ ì…ë ¥")

dog_name = st.sidebar.text_input("ğŸ• ì´ë¦„", value="ìš°ë¦¬ ê°•ì•„ì§€")
dog_age = st.sidebar.number_input("ğŸ‚ ë‚˜ì´(ì‚´)", min_value=0, max_value=30, value=2)
dog_breed = st.sidebar.text_input("ğŸ¾ ê²¬ì¢…", value="ë¯¹ìŠ¤ê²¬")
dog_gender = st.sidebar.radio("âš§ ì„±ë³„", ["ìˆ˜ì»·", "ì•”ì»·", "ëª¨ë¦„"])

st.sidebar.markdown("---")
st.sidebar.write(f"**ì…ë ¥ëœ ì •ë³´ ìš”ì•½**")
st.sidebar.write(f"ğŸ¶ ì´ë¦„: {dog_name}")
st.sidebar.write(f"ğŸ‚ ë‚˜ì´: {dog_age}ì‚´")
st.sidebar.write(f"ğŸ¾ ê²¬ì¢…: {dog_breed}")
st.sidebar.write(f"âš§ ì„±ë³„: {dog_gender}")

# ===============================
# í–‰ë™ ë°ì´í„° (ì¹´í…Œê³ ë¦¬ë³„ + ì´ëª¨ì§€ í¬í•¨)
# ===============================
dog_behaviors = {
    "ê¼¬ë¦¬": {
        "ğŸ•â€ğŸ¦º ê¼¬ë¦¬ë¥¼ í¬ê²Œ í”ë“¦": {"ì˜ë¯¸": "ğŸ˜ ê¸°ì¨ê³¼ ë°˜ê°€ì›€ì˜ ì‹ í˜¸ì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ê°™ì´ ë†€ì•„ì£¼ê³  êµê°ì„ í•´ì£¼ì„¸ìš” ğŸ¾", "ê¸ì •": True},
        "ğŸ• ê¼¬ë¦¬ë¥¼ ì²œì²œíˆ í”ë“¦": {"ì˜ë¯¸": "ğŸ¤” ê²½ê³„í•˜ê±°ë‚˜ ì£¼ì˜ë¥¼ ê¸°ìš¸ì´ëŠ” ìƒíƒœì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ì•ˆì‹¬í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ˜Ÿ ê¼¬ë¦¬ë¥¼ ë‹¤ë¦¬ ì‚¬ì´ì— ë„£ìŒ": {"ì˜ë¯¸": "ğŸ˜¨ ë¶ˆì•ˆ, ë‘ë ¤ì›€, ë³µì¢…ì„ ì˜ë¯¸í•´ìš”.", "ëŒ€ì²˜ë²•": "ë‹¬ë˜ì£¼ê³  í™˜ê²½ì„ ì•ˆì •ì‹œì¼œ ì£¼ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ˜  ê¼¬ë¦¬ë¥¼ ë»£ë»£í•˜ê²Œ ì„¸ì›€": {"ì˜ë¯¸": "âš ï¸ ê¸´ì¥, ìœ„í˜‘ ì‹ í˜¸ì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ìê·¹ì ì¸ ìƒí™©ì„ í”¼í•˜ì„¸ìš”.", "ê¸ì •": False},
    },
    "ê·€": {
        "ğŸ‘‚ ê·€ë¥¼ ì•ìœ¼ë¡œ ì„¸ì›€": {"ì˜ë¯¸": "ğŸ‘€ í˜¸ê¸°ì‹¬, ê´€ì‹¬, ê²½ê³„ì‹¬ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "íƒìƒ‰ì„ ë„ì™€ì£¼ê±°ë‚˜ ì§„ì •ì‹œì¼œ ì£¼ì„¸ìš”.", "ê¸ì •": True},
        "ğŸ‘‚ ê·€ë¥¼ ë’¤ë¡œ ì –í˜": {"ì˜ë¯¸": "ğŸ˜” ë¶ˆì•ˆ, ë‘ë ¤ì›€, ë³µì¢…ì˜ ì‹ í˜¸ì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ì§„ì •ì‹œí‚¤ê³  ë°°ë ¤í•˜ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ‘‚ ê·€ë¥¼ í•œìª½ë§Œ ì›€ì§ì„": {"ì˜ë¯¸": "ğŸ¤¨ í•œìª½ ì†Œë¦¬ì— ì§‘ì¤‘í•˜ê±°ë‚˜ í˜¼ë€ìŠ¤ëŸ¬ì›Œí•´ìš”.", "ëŒ€ì²˜ë²•": "í™˜ê²½ì„ í™•ì¸í•˜ì„¸ìš”.", "ê¸ì •": False},
    },
    "ëª¸ì§“": {
        "ğŸ™ƒ ë°°ë¥¼ ë³´ì—¬ì¤Œ": {"ì˜ë¯¸": "ğŸ’– ë³µì¢…ê³¼ ì‹ ë¢°ì˜ í‘œí˜„ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "ë¶€ë“œëŸ½ê²Œ ì“°ë‹¤ë“¬ì–´ ì£¼ì„¸ìš”.", "ê¸ì •": True},
        "ğŸ¤£ ë°”ë‹¥ì— ë’¹êµ´ê¸°": {"ì˜ë¯¸": "ğŸ˜† ë†€ì´ ìš”ì²­, ê¸°ì¨ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "ê°™ì´ ë†€ì•„ì£¼ì„¸ìš”.", "ê¸ì •": True},
        "ğŸ¥¶ ëª¸ì„ ë–¨ìŒ": {"ì˜ë¯¸": "ğŸ˜¥ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ, ë¶ˆì•ˆ, í¥ë¶„ ìƒíƒœì¼ ìˆ˜ ìˆì–´ìš”.", "ëŒ€ì²˜ë²•": "íœ´ì‹ì„ ì£¼ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ˜¡ ë“±ì„ êµ¬ë¶€ë¦¬ê³  ìœ¼ë¥´ë ê±°ë¦¼": {"ì˜ë¯¸": "ğŸš¨ ê³µê²©ì ì´ê±°ë‚˜ ë°©ì–´ ì‹ í˜¸ì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ì ‘ê·¼í•˜ì§€ ë§ê³  ì‹œê°„ì„ ì£¼ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ‘‹ ì•ë°œë¡œ íˆ­íˆ­ ì¹˜ê¸°": {"ì˜ë¯¸": "ğŸ˜‹ ê´€ì‹¬ì„ ì›í•˜ê±°ë‚˜ ë†€ê³  ì‹¶ì–´ìš”.", "ëŒ€ì²˜ë²•": "ê°€ëŠ¥í•˜ë©´ ë°˜ì‘í•´ ì£¼ì„¸ìš”.", "ê¸ì •": True},
    },
    "ì†Œë¦¬": {
        "ğŸ¶ í¬ê²Œ ì§–ìŒ": {"ì˜ë¯¸": "ğŸ”” ê²½ê³„, í¥ë¶„, ì£¼ëª©ì„ ëŒë ¤ëŠ” í–‰ë™ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "ì›ì¸ì„ íŒŒì•…í•˜ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ¥º ë‚‘ë‚‘ê±°ë¦¼": {"ì˜ë¯¸": "ğŸ˜¢ ë¶ˆì•ˆ, ì£¼ëª© ìš•êµ¬, ë˜ëŠ” í†µì¦ì¼ ìˆ˜ ìˆì–´ìš”.", "ëŒ€ì²˜ë²•": "ìƒí™©ì„ ì‚´í”¼ê³  í•„ìš”ì‹œ ë³‘ì› ë°©ë¬¸í•˜ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ˜¤ ë‚®ê²Œ ìœ¼ë¥´ë ê±°ë¦¼": {"ì˜ë¯¸": "âš ï¸ ìœ„í˜‘ì„ ëŠë¼ê±°ë‚˜ ê²½ê³  ì‹ í˜¸ì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ìê·¹í•˜ì§€ ë§ê³  ê³µê°„ì„ ì£¼ì„¸ìš”.", "ê¸ì •": False},
        "ğŸŒ™ í•˜ìš¸ë§": {"ì˜ë¯¸": "ğŸ˜” ì™¸ë¡œì›€, ìŠ¤íŠ¸ë ˆìŠ¤, ë‹¤ë¥¸ ê°œ ë°˜ì‘ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "êµê°ì„ ëŠ˜ë ¤ì£¼ì„¸ìš”.", "ê¸ì •": False},
    },
    "í‘œì •": {
        "ğŸ¥± í•˜í’ˆí•¨": {"ì˜ë¯¸": "ğŸ˜´ ì¡¸ë¦¼, ì§€ë£¨í•¨, ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œì˜ˆìš”.", "ëŒ€ì²˜ë²•": "í¸ì•ˆí•˜ê²Œ í•´ì£¼ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ‘… í˜€ë¥¼ ë‚¼ë¦„ê±°ë¦¼": {"ì˜ë¯¸": "ğŸ˜– ê¸´ì¥, ë¶ˆì•ˆ, ë‹¬ë˜ëŠ” ì‹ í˜¸ì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ìê·¹ì„ ì¤„ì—¬ì£¼ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ™ˆ ëˆˆì„ í”¼í•¨": {"ì˜ë¯¸": "ğŸ˜“ ë¶ˆì•ˆ, ë‘ë ¤ì›€, ë³µì¢… ì‹ í˜¸ì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ì‹œê°„ì„ ì£¼ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ˜³ ëˆˆì„ í¬ê²Œ ëœ¸": {"ì˜ë¯¸": "ğŸ˜² ê²½ê³„ì‹¬, ë†€ëŒ, ë‘ë ¤ì›€ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "ì•ˆì‹¬ì‹œì¼œ ì£¼ì„¸ìš”.", "ê¸ì •": False},
    },
    "ìŠµê´€": {
        "ğŸ¦¶ ë°œì„ í•¥ìŒ": {"ì˜ë¯¸": "ğŸ¤’ ë¶ˆì•ˆ, ì§€ë£¨í•¨, í”¼ë¶€ ë¬¸ì œì¼ ìˆ˜ ìˆì–´ìš”.", "ëŒ€ì²˜ë²•": "ê³¼ë„í•˜ë©´ ìˆ˜ì˜ì‚¬ ìƒë‹´í•˜ì„¸ìš”.", "ê¸ì •": False},
        "ğŸªµ ë°”ë‹¥ì„ ê¸ìŒ": {"ì˜ë¯¸": "ğŸ˜… ë‘¥ì§€ ë§Œë“¤ê¸°, ì§€ë£¨í•¨ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "ë†€ì´ì™€ ì‚°ì±…ì„ ëŠ˜ë¦¬ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ”„ ëŒì•„ë‹¤ë‹ˆë©° ë¹™ë¹™ ë": {"ì˜ë¯¸": "ğŸ˜¬ í¥ë¶„, ë¶ˆì•ˆ, ìŠµê´€ì  í–‰ë™ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "ì§„ì •ì‹œì¼œ ì£¼ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ§¸ ì¥ë‚œê°ì„ ë¬¼ê³  ì˜´": {"ì˜ë¯¸": "ğŸ˜† ë†€ê³  ì‹¶ë‹¤ëŠ” í‘œí˜„ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "ê°™ì´ ë†€ì•„ì£¼ì„¸ìš”.", "ê¸ì •": True},
        "ğŸ‘ƒ ë°”ë‹¥ì„ ëƒ„ìƒˆ ë§¡ìŒ": {"ì˜ë¯¸": "ğŸ§ íƒìƒ‰, ë¶ˆì•ˆ, ë³¸ëŠ¥ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "ê³¼í•˜ì§€ ì•Šìœ¼ë©´ ê´œì°®ì•„ìš”.", "ê¸ì •": True},
    },
    "ì‹ì‚¬": {
        "ğŸ½ï¸ ì‚¬ë£Œë¥¼ ì•ˆ ë¨¹ìŒ": {"ì˜ë¯¸": "ğŸ¤¢ ìŠ¤íŠ¸ë ˆìŠ¤, ê±´ê°• ë¬¸ì œ, ì…ë§› ë³€í™”ì¼ ìˆ˜ ìˆì–´ìš”.", "ëŒ€ì²˜ë²•": "ì§€ì†ë˜ë©´ ë³‘ì›ì— ê°€ì„¸ìš”.", "ê¸ì •": False},
        "âš¡ ê¸‰í•˜ê²Œ ë¨¹ìŒ": {"ì˜ë¯¸": "ğŸ˜®â€ğŸ’¨ ê²½ìŸì‹¬, ë¶ˆì•ˆ, ìŠµê´€ì´ì—ìš”.", "ëŒ€ì²˜ë²•": "ìŠ¬ë¡œìš° í”¼ë” ê·¸ë¦‡ì„ ì“°ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ¤® ë¨¹ì€ í›„ í† í•¨": {"ì˜ë¯¸": "ğŸ¤” ì†Œí™” ë¬¸ì œ, ê³¼ì‹, ê±´ê°• ì´ìƒì¼ ìˆ˜ ìˆì–´ìš”.", "ëŒ€ì²˜ë²•": "ì§€ì†ë˜ë©´ ë³‘ì›ì— ê°€ì„¸ìš”.", "ê¸ì •": False},
    },
    "ì‚¬íšŒì„±": {
        "ğŸ• ë‹¤ë¥¸ ê°œ ìœ„ì— ì˜¬ë¼íƒ": {"ì˜ë¯¸": "ğŸ˜… ì§€ë°°ìš•, ë†€ì´, í¥ë¶„ ìƒíƒœì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ìƒëŒ€ê°€ ë¶ˆí¸í•´í•˜ë©´ ì œì§€í•˜ì„¸ìš”.", "ê¸ì •": False},
        "ğŸ© ë‹¤ë¥¸ ê°œ ì£¼ìœ„ë¥¼ ë§´ë": {"ì˜ë¯¸": "ğŸ‘‹ í˜¸ê¸°ì‹¬, ì‚¬íšŒì  ì¸ì‚¬ì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ìì—°ìŠ¤ëŸ¬ìš´ í–‰ë™ì´ì—ìš”.", "ê¸ì •": True},
        "ğŸ˜˜ ì£¼ì¸ì˜ ì–¼êµ´ì„ í•¥ìŒ": {"ì˜ë¯¸": "ğŸ’ ì• ì • í‘œí˜„, ë³µì¢…, ì¸ì‚¬ì˜ˆìš”.", "ëŒ€ì²˜ë²•": "ë°›ì•„ì£¼ë˜ ì›ì¹˜ ì•Šìœ¼ë©´ ì œì§€í•˜ì„¸ìš”.", "ê¸ì •": True},
    }
}

# ===============================
# ì¹´í…Œê³ ë¦¬ ì„ íƒ + í–‰ë™ ì„ íƒ
# ===============================
category = st.radio("ğŸ“‚ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”:", list(dog_behaviors.keys()))
behavior = st.selectbox("ğŸ¾ í–‰ë™ì„ ì„ íƒí•˜ì„¸ìš”:", list(dog_behaviors[category].keys()))

# ===============================
# ì„ íƒ ê²°ê³¼ ì¶œë ¥
# ===============================
if behavior:
    info = dog_behaviors[category][behavior]
    st.subheader(f"{behavior}")
    st.write(f"**ì˜ë¯¸:** {info['ì˜ë¯¸']}")
    st.write(f"**ëŒ€ì²˜ë²•:** {info['ëŒ€ì²˜ë²•']}")

    # í–‰ë™ ê¸°ë¡
    if "history" not in st.session_state:
        st.session_state.history = []

    if st.button("ğŸ“Œ ì´ í–‰ë™ ê¸°ë¡í•˜ê¸°"):
        st.session_state.history.append({"í–‰ë™": behavior, **info})

# ===============================
# ê¸°ë¡ëœ í–‰ë™ ìš”ì•½ + ìŠ¤íŠ¸ë ˆìŠ¤ ì§€ìˆ˜ + í”¼ë“œë°±
# ===============================
if "history" in st.session_state and st.session_state.history:
    st.markdown("---")
    st.subheader(f"ğŸ“Š {dog_name}ì˜ ì˜¤ëŠ˜ ê¸°ë¡ëœ í–‰ë™")

    positive = sum(1 for h in st.session_state.history if h["ê¸ì •"])
    negative = len(st.session_state.history) - positive

    for idx, h in enumerate(st.session_state.history, 1):
        st.write(f"{idx}. {h['í–‰ë™']} â†’ {h['ì˜ë¯¸']}")

    st.write(f"âœ… ê¸ì • í–‰ë™ ìˆ˜: {positive}")
    st.write(f"âš ï¸ ë¶€ì •/ìŠ¤íŠ¸ë ˆìŠ¤ í–‰ë™ ìˆ˜: {negative}")

    # ìŠ¤íŠ¸ë ˆìŠ¤ ì§€ìˆ˜ ê²°ê³¼
    if negative > positive:
        st.error(f"ğŸ˜Ÿ {dog_name}ì˜ ìŠ¤íŠ¸ë ˆìŠ¤ ì§€ìˆ˜ê°€ ë†’ì•„ìš”. ê°•ì•„ì§€ë¥¼ ì•ˆì •ì‹œì¼œ ì£¼ì„¸ìš”!")
    else:
        st.success(f"ğŸ¥° {dog_name}ê°€ í–‰ë³µí•œ í•˜ë£¨ë¥¼ ë³´ë‚´ê³  ìˆì–´ìš”!")

    # ===============================
    # ë§ì¶¤ í”¼ë“œë°± ê¸°ëŠ¥
    # ===============================
    st.markdown("### ğŸ“ ë§ì¶¤ í”¼ë“œë°±")

    feedback = []
    if negative >= 3:
        feedback.append("âš ï¸ ìŠ¤íŠ¸ë ˆìŠ¤ ì‹ í˜¸ê°€ ë§ì•„ìš”. ì‚°ì±…ì´ë‚˜ ë†€ì´ ì‹œê°„ì„ ëŠ˜ë ¤ì£¼ì„¸ìš”.")
    if any("ë‚‘ë‚‘ê±°ë¦¼" in h["í–‰ë™"] for h in st.session_state.history):
        feedback.append("ğŸ©º ë‚‘ë‚‘ê±°ë¦¼ì´ ì¦ìœ¼ë©´ ë¶ˆì•ˆ ë˜ëŠ” í†µì¦ì¼ ìˆ˜ ìˆì–´ìš”. ê´€ì°°ì´ í•„ìš”í•©ë‹ˆë‹¤.")
    if any("í† í•¨" in h["í–‰ë™"] for h in st.session_state.history):
        feedback.append("ğŸš‘ ë¨¹ì€ í›„ í† í•˜ëŠ” í–‰ë™ì´ ë°˜ë³µë˜ë©´ ë°˜ë“œì‹œ ìˆ˜ì˜ì‚¬ ìƒë‹´ì´ í•„ìš”í•©ë‹ˆë‹¤.")
    if positive >= 3 and negative == 0:
        feedback.append("ğŸ‰ ì•„ì£¼ í–‰ë³µí•œ í•˜ë£¨ë¥¼ ë³´ë‚´ê³  ìˆì–´ìš”! ì§€ê¸ˆì²˜ëŸ¼ë§Œ ëŒë´ì£¼ì„¸ìš”.")
    if not feedback:
        feedback.append("ğŸ™‚ íŠ¹ë³„í•œ ë¬¸ì œëŠ” ì—†ì§€ë§Œ ê¾¸ì¤€í•œ êµê°ê³¼ ëŒë´„ì´ í•„ìš”í•´ìš”.")

    for fb in feedback:
        st.write(fb)
